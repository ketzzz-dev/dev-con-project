[gd_scene load_steps=52 format=3 uid="uid://dyep7kd7t5yfy"]

[ext_resource type="Material" uid="uid://bhwfgy47fyufa" path="res://assets/material_13.tres" id="1_errlg"]
[ext_resource type="Script" uid="uid://dxrdgfyd50mxw" path="res://scripts/player/movement.gd" id="1_iyx0m"]
[ext_resource type="Texture2D" uid="uid://glabolo3fpjo" path="res://assets/Small-8-Direction-Characters_by_AxulArt.png" id="2_74lek"]
[ext_resource type="Script" uid="uid://dbq6vcll4r2xt" path="res://scripts/player/animator.gd" id="2_j5jx5"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_bl13t"]
height = 1.0
radius = 0.4

[sub_resource type="Animation" id="Animation_j5jx5"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [Vector2i(4, 10)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_lpvoh"]
_data = {
&"RESET": SubResource("Animation_j5jx5")
}

[sub_resource type="Animation" id="Animation_at5dv"]
resource_name = "idle_back"
length = 0.0333367
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(0, 10)]
}

[sub_resource type="Animation" id="Animation_ghpyy"]
resource_name = "idle_back_left"
length = 0.0333367
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(7, 10)]
}

[sub_resource type="Animation" id="Animation_44saj"]
resource_name = "idle_back_right"
length = 0.0333367
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(1, 10)]
}

[sub_resource type="Animation" id="Animation_lpvoh"]
resource_name = "idle_front"
length = 0.0333367
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(4, 10)]
}

[sub_resource type="Animation" id="Animation_yk7ts"]
resource_name = "idle_front_left"
length = 0.0333367
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(5, 10)]
}

[sub_resource type="Animation" id="Animation_ajshl"]
resource_name = "idle_front_right"
length = 0.0333367
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(3, 10)]
}

[sub_resource type="Animation" id="Animation_jcd4p"]
resource_name = "idle_left"
length = 0.0333367
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(6, 10)]
}

[sub_resource type="Animation" id="Animation_uacia"]
resource_name = "idle_right"
length = 0.0333367
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(2, 10)]
}

[sub_resource type="Animation" id="Animation_7mbro"]
resource_name = "move_back"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.251188, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(0, 9), Vector2i(0, 10), Vector2i(0, 11), Vector2i(0, 10)]
}

[sub_resource type="Animation" id="Animation_daiq8"]
resource_name = "move_back_left"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(7, 9), Vector2i(7, 10), Vector2i(7, 11), Vector2i(7, 10)]
}

[sub_resource type="Animation" id="Animation_c6rvn"]
resource_name = "move_back_right"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(1, 9), Vector2i(1, 10), Vector2i(1, 11), Vector2i(1, 10)]
}

[sub_resource type="Animation" id="Animation_74lek"]
resource_name = "move_front"
length = 1.00003
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(4, 9), Vector2i(4, 10), Vector2i(4, 11), Vector2i(4, 10)]
}

[sub_resource type="Animation" id="Animation_xrtyr"]
resource_name = "move_front_left"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(5, 9), Vector2i(5, 10), Vector2i(5, 11), Vector2i(5, 10)]
}

[sub_resource type="Animation" id="Animation_5jxlq"]
resource_name = "move_front_left"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(3, 9), Vector2i(3, 10), Vector2i(3, 11), Vector2i(3, 10)]
}

[sub_resource type="Animation" id="Animation_ff6ho"]
resource_name = "move_left"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(6, 9), Vector2i(6, 10), Vector2i(6, 11), Vector2i(6, 10)]
}

[sub_resource type="Animation" id="Animation_7yos8"]
resource_name = "move_right"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(2, 9), Vector2i(2, 10), Vector2i(2, 11), Vector2i(2, 10)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_7mbro"]
_data = {
&"idle_back": SubResource("Animation_at5dv"),
&"idle_back_left": SubResource("Animation_ghpyy"),
&"idle_back_right": SubResource("Animation_44saj"),
&"idle_front": SubResource("Animation_lpvoh"),
&"idle_front_left": SubResource("Animation_yk7ts"),
&"idle_front_right": SubResource("Animation_ajshl"),
&"idle_left": SubResource("Animation_jcd4p"),
&"idle_right": SubResource("Animation_uacia"),
&"move_back": SubResource("Animation_7mbro"),
&"move_back_left": SubResource("Animation_daiq8"),
&"move_back_right": SubResource("Animation_c6rvn"),
&"move_front": SubResource("Animation_74lek"),
&"move_front_left": SubResource("Animation_xrtyr"),
&"move_front_right": SubResource("Animation_5jxlq"),
&"move_left": SubResource("Animation_ff6ho"),
&"move_right": SubResource("Animation_7yos8")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_iu4f2"]
animation = &"player/idle_front"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_aally"]
animation = &"player/idle_back"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_x60cw"]
animation = &"player/idle_left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qd7wy"]
animation = &"player/idle_right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7kdbb"]
animation = &"player/idle_front_right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_osqhk"]
animation = &"player/idle_front_left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_2m854"]
animation = &"player/idle_back_left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_by7g2"]
animation = &"player/idle_back_right"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_j5jx5"]
blend_point_0/node = SubResource("AnimationNodeAnimation_iu4f2")
blend_point_0/pos = Vector2(0, 1)
blend_point_1/node = SubResource("AnimationNodeAnimation_aally")
blend_point_1/pos = Vector2(0, -1)
blend_point_2/node = SubResource("AnimationNodeAnimation_x60cw")
blend_point_2/pos = Vector2(-1, 0)
blend_point_3/node = SubResource("AnimationNodeAnimation_qd7wy")
blend_point_3/pos = Vector2(1, 0)
blend_point_4/node = SubResource("AnimationNodeAnimation_7kdbb")
blend_point_4/pos = Vector2(1, 1)
blend_point_5/node = SubResource("AnimationNodeAnimation_osqhk")
blend_point_5/pos = Vector2(-1, 1)
blend_point_6/node = SubResource("AnimationNodeAnimation_2m854")
blend_point_6/pos = Vector2(-1, -1)
blend_point_7/node = SubResource("AnimationNodeAnimation_by7g2")
blend_point_7/pos = Vector2(1, -1)
blend_mode = 2

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_n74k2"]
animation = &"player/move_front"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_si7kk"]
animation = &"player/move_front_left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_pn65j"]
animation = &"player/move_front_right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5f8cm"]
animation = &"player/move_right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_gm488"]
animation = &"player/move_back_right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_kay4s"]
animation = &"player/move_back"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_j7bvy"]
animation = &"player/move_back_left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_1dqgb"]
animation = &"player/move_left"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_lpvoh"]
blend_point_0/node = SubResource("AnimationNodeAnimation_n74k2")
blend_point_0/pos = Vector2(0, 1)
blend_point_1/node = SubResource("AnimationNodeAnimation_si7kk")
blend_point_1/pos = Vector2(-1, 1)
blend_point_2/node = SubResource("AnimationNodeAnimation_pn65j")
blend_point_2/pos = Vector2(1, 1)
blend_point_3/node = SubResource("AnimationNodeAnimation_5f8cm")
blend_point_3/pos = Vector2(1, 0)
blend_point_4/node = SubResource("AnimationNodeAnimation_gm488")
blend_point_4/pos = Vector2(1, -1)
blend_point_5/node = SubResource("AnimationNodeAnimation_kay4s")
blend_point_5/pos = Vector2(0, -1)
blend_point_6/node = SubResource("AnimationNodeAnimation_j7bvy")
blend_point_6/pos = Vector2(-1, -1)
blend_point_7/node = SubResource("AnimationNodeAnimation_1dqgb")
blend_point_7/pos = Vector2(-1, 0)
blend_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jcd4p"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_y81of"]
advance_mode = 2
advance_condition = &"is_moving"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gsk6d"]
advance_mode = 2
advance_condition = &"is_idling"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_uacia"]
states/Idle/node = SubResource("AnimationNodeBlendSpace2D_j5jx5")
states/Idle/position = Vector2(403, 100)
states/Move/node = SubResource("AnimationNodeBlendSpace2D_lpvoh")
states/Move/position = Vector2(609, 100)
transitions = ["Start", "Idle", SubResource("AnimationNodeStateMachineTransition_jcd4p"), "Idle", "Move", SubResource("AnimationNodeStateMachineTransition_y81of"), "Move", "Idle", SubResource("AnimationNodeStateMachineTransition_gsk6d")]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_74lek"]
sky_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)
ground_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)

[sub_resource type="Sky" id="Sky_j5jx5"]
sky_material = SubResource("ProceduralSkyMaterial_74lek")

[sub_resource type="Environment" id="Environment_lpvoh"]
background_mode = 2
sky = SubResource("Sky_j5jx5")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_at5dv"]

[sub_resource type="QuadMesh" id="QuadMesh_jcd4p"]
material = ExtResource("1_errlg")
size = Vector2(16, 16)
orientation = 1

[node name="Test" type="Node3D"]

[node name="CharacterBody3D" type="CharacterBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="CharacterBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
shape = SubResource("CylinderShape3D_bl13t")
debug_fill = false

[node name="Sprite3D" type="Sprite3D" parent="CharacterBody3D"]
offset = Vector2(0.5, 10)
pixel_size = 0.0625
billboard = 2
shaded = true
alpha_cut = 2
texture_filter = 0
texture = ExtResource("2_74lek")
hframes = 8
vframes = 12
frame = 84

[node name="AnimationPlayer" type="AnimationPlayer" parent="CharacterBody3D"]
libraries = {
&"": SubResource("AnimationLibrary_lpvoh"),
&"player": SubResource("AnimationLibrary_7mbro")
}

[node name="AnimationTree" type="AnimationTree" parent="CharacterBody3D"]
tree_root = SubResource("AnimationNodeStateMachine_uacia")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/is_idling = true
parameters/conditions/is_moving = false
parameters/Idle/blend_position = Vector2(0.960128, -0.933824)
parameters/Move/blend_position = Vector2(-0.992025, -0.5)

[node name="Movement" type="Node3D" parent="CharacterBody3D"]
script = ExtResource("1_iyx0m")
speed = 2.0
acceleration = 6.0
deceleration = 12.0

[node name="Animator" type="Node3D" parent="CharacterBody3D" node_paths=PackedStringArray("animation_tree")]
script = ExtResource("2_j5jx5")
animation_tree = NodePath("../AnimationTree")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_lpvoh")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.863854, -0.436219, 0.251931, 0.422595, -0.355357, 0.833748, -0.274171, 0.826701, 0.49132, 0, 0, 0)
shadow_enabled = true

[node name="Ground" type="StaticBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ground"]
shape = SubResource("WorldBoundaryShape3D_at5dv")
debug_fill = false

[node name="MeshInstance3D" type="MeshInstance3D" parent="Ground"]
mesh = SubResource("QuadMesh_jcd4p")
