[gd_scene load_steps=31 format=3 uid="uid://cwirmhm0gp358"]

[ext_resource type="Texture2D" uid="uid://glabolo3fpjo" path="res://assets/Small-8-Direction-Characters_by_AxulArt.png" id="1_qhqgy"]
[ext_resource type="Script" uid="uid://dxrdgfyd50mxw" path="res://scripts/player/movement.gd" id="2_dqkch"]
[ext_resource type="AnimationNodeBlendSpace2D" uid="uid://0xphxgpiyjsa" path="res://animations/player_idle.tres" id="2_qlg0r"]
[ext_resource type="Script" uid="uid://caiehrcl3681d" path="res://scripts/player/interactor.gd" id="2_tuyoq"]
[ext_resource type="Script" uid="uid://dbq6vcll4r2xt" path="res://scripts/player/animator.gd" id="3_qlg0r"]
[ext_resource type="AnimationNodeBlendSpace2D" uid="uid://cst2a4bigaguk" path="res://animations/player_move.tres" id="3_tuyoq"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_bl13t"]
height = 1.0
radius = 0.4

[sub_resource type="Animation" id="Animation_j5jx5"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [Vector2i(4, 10)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_lpvoh"]
_data = {
&"RESET": SubResource("Animation_j5jx5")
}

[sub_resource type="Animation" id="Animation_at5dv"]
resource_name = "idle_back"
length = 1.0001
loop_mode = 1
step = 1.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(0, 10)]
}

[sub_resource type="Animation" id="Animation_ghpyy"]
resource_name = "idle_back_left"
length = 1.0001
loop_mode = 1
step = 1.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(7, 10)]
}

[sub_resource type="Animation" id="Animation_44saj"]
resource_name = "idle_back_right"
length = 1.0001
loop_mode = 1
step = 1.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(1, 10)]
}

[sub_resource type="Animation" id="Animation_lpvoh"]
resource_name = "idle_front"
length = 1.0001
loop_mode = 1
step = 1.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(4, 10)]
}

[sub_resource type="Animation" id="Animation_yk7ts"]
resource_name = "idle_front_left"
length = 1.0001
loop_mode = 1
step = 1.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(5, 10)]
}

[sub_resource type="Animation" id="Animation_ajshl"]
resource_name = "idle_front_right"
length = 1.0001
loop_mode = 1
step = 1.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(3, 10)]
}

[sub_resource type="Animation" id="Animation_jcd4p"]
resource_name = "idle_left"
length = 1.0001
loop_mode = 1
step = 1.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(6, 10)]
}

[sub_resource type="Animation" id="Animation_uacia"]
resource_name = "idle_right"
length = 1.0001
loop_mode = 1
step = 1.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2i(2, 10)]
}

[sub_resource type="Animation" id="Animation_7mbro"]
resource_name = "move_back"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.251188, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(0, 9), Vector2i(0, 10), Vector2i(0, 11), Vector2i(0, 10)]
}

[sub_resource type="Animation" id="Animation_daiq8"]
resource_name = "move_back_left"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(7, 9), Vector2i(7, 10), Vector2i(7, 11), Vector2i(7, 10)]
}

[sub_resource type="Animation" id="Animation_c6rvn"]
resource_name = "move_back_right"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(1, 9), Vector2i(1, 10), Vector2i(1, 11), Vector2i(1, 10)]
}

[sub_resource type="Animation" id="Animation_74lek"]
resource_name = "move_front"
length = 1.00003
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(4, 9), Vector2i(4, 10), Vector2i(4, 11), Vector2i(4, 10)]
}

[sub_resource type="Animation" id="Animation_xrtyr"]
resource_name = "move_front_left"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(5, 9), Vector2i(5, 10), Vector2i(5, 11), Vector2i(5, 10)]
}

[sub_resource type="Animation" id="Animation_5jxlq"]
resource_name = "move_front_left"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(3, 9), Vector2i(3, 10), Vector2i(3, 11), Vector2i(3, 10)]
}

[sub_resource type="Animation" id="Animation_ff6ho"]
resource_name = "move_left"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(6, 9), Vector2i(6, 10), Vector2i(6, 11), Vector2i(6, 10)]
}

[sub_resource type="Animation" id="Animation_7yos8"]
resource_name = "move_right"
loop_mode = 1
step = 0.25
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5, 0.75),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(2, 9), Vector2i(2, 10), Vector2i(2, 11), Vector2i(2, 10)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_7mbro"]
_data = {
&"idle_back": SubResource("Animation_at5dv"),
&"idle_back_left": SubResource("Animation_ghpyy"),
&"idle_back_right": SubResource("Animation_44saj"),
&"idle_front": SubResource("Animation_lpvoh"),
&"idle_front_left": SubResource("Animation_yk7ts"),
&"idle_front_right": SubResource("Animation_ajshl"),
&"idle_left": SubResource("Animation_jcd4p"),
&"idle_right": SubResource("Animation_uacia"),
&"move_back": SubResource("Animation_7mbro"),
&"move_back_left": SubResource("Animation_daiq8"),
&"move_back_right": SubResource("Animation_c6rvn"),
&"move_front": SubResource("Animation_74lek"),
&"move_front_left": SubResource("Animation_xrtyr"),
&"move_front_right": SubResource("Animation_5jxlq"),
&"move_left": SubResource("Animation_ff6ho"),
&"move_right": SubResource("Animation_7yos8")
}

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jcd4p"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_y81of"]
advance_mode = 2
advance_condition = &"is_moving"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gsk6d"]
advance_mode = 2
advance_condition = &"is_idling"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_uacia"]
states/Idle/node = ExtResource("2_qlg0r")
states/Idle/position = Vector2(403, 100)
states/Move/node = ExtResource("3_tuyoq")
states/Move/position = Vector2(609, 100)
transitions = ["Start", "Idle", SubResource("AnimationNodeStateMachineTransition_jcd4p"), "Idle", "Move", SubResource("AnimationNodeStateMachineTransition_y81of"), "Move", "Idle", SubResource("AnimationNodeStateMachineTransition_gsk6d")]

[node name="Player" type="CharacterBody3D"]
physics_interpolation_mode = 1
axis_lock_linear_y = true
axis_lock_angular_x = true
axis_lock_angular_y = true
axis_lock_angular_z = true
script = ExtResource("2_dqkch")
speed = 2.0
acceleration = 6.0
deceleration = 12.0

[node name="Interactor" type="Node" parent="."]
script = ExtResource("2_tuyoq")
proximity = 1.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
shape = SubResource("CylinderShape3D_bl13t")
debug_fill = false

[node name="Sprite3D" type="Sprite3D" parent="."]
offset = Vector2(0.5, 10)
pixel_size = 0.0625
billboard = 2
shaded = true
alpha_cut = 2
texture_filter = 0
texture = ExtResource("1_qhqgy")
hframes = 8
vframes = 12
frame = 84

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_lpvoh"),
&"player": SubResource("AnimationLibrary_7mbro")
}

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeStateMachine_uacia")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/is_idling = true
parameters/conditions/is_moving = false
parameters/Idle/blend_position = Vector2(0.960128, -0.933824)
parameters/Move/blend_position = Vector2(-0.992025, -0.5)
script = ExtResource("3_qlg0r")
